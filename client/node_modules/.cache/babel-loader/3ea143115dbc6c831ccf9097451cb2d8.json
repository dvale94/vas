{"ast":null,"code":"import request from 'request';\nimport serverConf from '../config';\nimport { GET_ERRORS, SET_VOLUNTEERS, VOLUNTEERS_LOADING } from './types'; // get volunteers from database\n\nexport const getVolunteers = () => dispatch => {\n  const endpoint = `${serverConf.uri}${serverConf.endpoints.volunteers.fetch}`;\n  request.get(endpoint, (error, response, body) => {\n    const res = JSON.parse(body);\n\n    if (error) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: res\n      });\n    } else {\n      // set current volunteers\n      dispatch(setCurrentVolunteers(res));\n    }\n  });\n}; // add volunteer to database and refresh the store\n\nexport const addVolunteer = form => dispatch => {\n  const endpoint = `${serverConf.uri}${serverConf.endpoints.volunteers.signup}`;\n  request.post(endpoint, {\n    form\n  }, (error, response, body) => {\n    const res = JSON.parse(body); //REMOVE- only for debugging\n\n    console.log(res);\n\n    if (error) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: res\n      });\n    } else {\n      // set current volunteers\n      dispatch(getVolunteers());\n    }\n  });\n}; // volunteers loading\n\nexport const setVolunteersLoading = () => {\n  return {\n    type: VOLUNTEERS_LOADING\n  };\n}; // set volunteers\n\nexport const setCurrentVolunteers = volunteers => {\n  return {\n    type: SET_VOLUNTEERS,\n    payload: volunteers\n  };\n};","map":{"version":3,"sources":["/Users/daniel/Desktop/vas/client/src/actions/volunteerActions.js"],"names":["request","serverConf","GET_ERRORS","SET_VOLUNTEERS","VOLUNTEERS_LOADING","getVolunteers","dispatch","endpoint","uri","endpoints","volunteers","fetch","get","error","response","body","res","JSON","parse","type","payload","setCurrentVolunteers","addVolunteer","form","signup","post","console","log","setVolunteersLoading"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,OAAOC,UAAP,MAAuB,WAAvB;AACA,SAASC,UAAT,EAAqBC,cAArB,EAAqCC,kBAArC,QAA8D,SAA9D,C,CAEA;;AACA,OAAO,MAAMC,aAAa,GAAG,MAAMC,QAAQ,IAAI;AAE3C,QAAMC,QAAQ,GAAI,GAAEN,UAAU,CAACO,GAAI,GAAEP,UAAU,CAACQ,SAAX,CAAqBC,UAArB,CAAgCC,KAAM,EAA3E;AAEAX,EAAAA,OAAO,CAACY,GAAR,CAAYL,QAAZ,EAAsB,CAACM,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,KAA2B;AAE7C,UAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAZ;;AAEA,QAAIF,KAAJ,EAAW;AACPP,MAAAA,QAAQ,CAAC;AACLa,QAAAA,IAAI,EAAEjB,UADD;AAELkB,QAAAA,OAAO,EAAEJ;AAFJ,OAAD,CAAR;AAIH,KALD,MAMK;AACD;AACAV,MAAAA,QAAQ,CAACe,oBAAoB,CAACL,GAAD,CAArB,CAAR;AACH;AACJ,GAdD;AAeH,CAnBM,C,CAqBP;;AACA,OAAO,MAAMM,YAAY,GAAGC,IAAI,IAAIjB,QAAQ,IAAI;AAE5C,QAAMC,QAAQ,GAAI,GAAEN,UAAU,CAACO,GAAI,GAAEP,UAAU,CAACQ,SAAX,CAAqBC,UAArB,CAAgCc,MAAO,EAA5E;AAEAxB,EAAAA,OAAO,CAACyB,IAAR,CAAalB,QAAb,EAAuB;AAAEgB,IAAAA;AAAF,GAAvB,EAAiC,CAACV,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,KAA2B;AAExD,UAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAZ,CAFwD,CAIxD;;AACAW,IAAAA,OAAO,CAACC,GAAR,CAAYX,GAAZ;;AAEA,QAAIH,KAAJ,EAAW;AACPP,MAAAA,QAAQ,CAAC;AACLa,QAAAA,IAAI,EAAEjB,UADD;AAELkB,QAAAA,OAAO,EAAEJ;AAFJ,OAAD,CAAR;AAIH,KALD,MAMK;AACD;AACAV,MAAAA,QAAQ,CAACD,aAAa,EAAd,CAAR;AACH;AACJ,GAjBD;AAkBF,CAtBK,C,CAwBP;;AACA,OAAO,MAAMuB,oBAAoB,GAAG,MAAM;AACtC,SAAO;AACHT,IAAAA,IAAI,EAAEf;AADH,GAAP;AAGH,CAJM,C,CAMP;;AACA,OAAO,MAAMiB,oBAAoB,GAAGX,UAAU,IAAI;AAC9C,SAAO;AACHS,IAAAA,IAAI,EAAEhB,cADH;AAEHiB,IAAAA,OAAO,EAAEV;AAFN,GAAP;AAIH,CALM","sourcesContent":["import request from 'request';\nimport serverConf from '../config'\nimport { GET_ERRORS, SET_VOLUNTEERS, VOLUNTEERS_LOADING} from './types';\n\n// get volunteers from database\nexport const getVolunteers = () => dispatch => {\n\n    const endpoint = `${serverConf.uri}${serverConf.endpoints.volunteers.fetch}`;\n\n    request.get(endpoint, (error, response, body) => {\n        \n        const res = JSON.parse(body);\n\n        if (error) {\n            dispatch({\n                type: GET_ERRORS,\n                payload: res\n              })\n        }\n        else {\n            // set current volunteers\n            dispatch(setCurrentVolunteers(res))\n        }    \n    });\n};\n\n// add volunteer to database and refresh the store\nexport const addVolunteer = form => dispatch => {\n\n    const endpoint = `${serverConf.uri}${serverConf.endpoints.volunteers.signup}`;\n\n    request.post(endpoint, { form }, (error, response, body) => {\n        \n        const res = JSON.parse(body);\n\n        //REMOVE- only for debugging\n        console.log(res)\n\n        if (error) {\n            dispatch({\n                type: GET_ERRORS,\n                payload: res\n              })\n        }\n        else {\n            // set current volunteers\n            dispatch(getVolunteers())\n        }   \n    });\n };\n\n// volunteers loading\nexport const setVolunteersLoading = () => {\n    return {\n        type: VOLUNTEERS_LOADING\n    };\n};\n\n// set volunteers\nexport const setCurrentVolunteers = volunteers => {\n    return {\n        type: SET_VOLUNTEERS,\n        payload: volunteers\n    };\n};\n"]},"metadata":{},"sourceType":"module"}