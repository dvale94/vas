{"ast":null,"code":"import request from 'request';\nimport serverConf from '../config';\nimport { GET_ERRORS, UPDATE_USER, SET_CURRENT_USER } from './types';\nimport { loginUser } from './authActions';\nexport const updateAdmin = (id, form) => dispatch => {\n  const endpoint = `${serverConf.uri}${serverConf.endpoints.admin.update}/${id}`;\n  request.put(endpoint, {\n    form\n  }, (error, response, body) => {\n    const res = JSON.parse(body);\n\n    if (error) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: res\n      });\n    } else {\n      console.log(\"Hello there: \" + res.id);\n      dispatch(getAdmin(res.id));\n    }\n  });\n}; // get volunteers from database\n\nexport const getAdmin = id => dispatch => {\n  const endpoint = `${serverConf.uri}${serverConf.endpoints.admin.fetch}/${id}`;\n  request.get(endpoint, (error, response, body) => {\n    const res = JSON.parse(body);\n\n    if (error) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: res\n      });\n      console.log(\"HEREHEREHERE1 \" + res);\n    } else {\n      // set current volunteers\n      dispatch(setCurrentUser(res));\n      console.log(\"HEREHEREHERE2 \" + body.json(res));\n    }\n  });\n};\nexport const setCurrentUser = user => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: user\n  };\n};","map":{"version":3,"sources":["/Users/aurelienmeray/Desktop/OG/vas/client/src/actions/adminActions.js"],"names":["request","serverConf","GET_ERRORS","UPDATE_USER","SET_CURRENT_USER","loginUser","updateAdmin","id","form","dispatch","endpoint","uri","endpoints","admin","update","put","error","response","body","res","JSON","parse","type","payload","console","log","getAdmin","fetch","get","setCurrentUser","json","user"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,OAAOC,UAAP,MAAuB,WAAvB;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAkCC,gBAAlC,QAA0D,SAA1D;AACA,SAASC,SAAT,QAA0B,eAA1B;AAGA,OAAO,MAAMC,WAAW,GAAG,CAACC,EAAD,EAAKC,IAAL,KAAcC,QAAQ,IAAI;AAEjD,QAAMC,QAAQ,GAAI,GAAET,UAAU,CAACU,GAAI,GAAEV,UAAU,CAACW,SAAX,CAAqBC,KAArB,CAA2BC,MAAO,IAAGP,EAAG,EAA7E;AAEAP,EAAAA,OAAO,CAACe,GAAR,CAAYL,QAAZ,EAAsB;AAAEF,IAAAA;AAAF,GAAtB,EAAgC,CAACQ,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,KAA2B;AAEvD,UAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAZ;;AAGA,QAAIF,KAAJ,EAAW;AACPP,MAAAA,QAAQ,CAAC;AACLa,QAAAA,IAAI,EAAEpB,UADD;AAELqB,QAAAA,OAAO,EAAEJ;AAFJ,OAAD,CAAR;AAIH,KALD,MAMK;AACDK,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBN,GAAG,CAACZ,EAAlC;AACAE,MAAAA,QAAQ,CAACiB,QAAQ,CAACP,GAAG,CAACZ,EAAL,CAAT,CAAR;AAGH;AACJ,GAjBD;AAkBF,CAtBK,C,CAwBN;;AACD,OAAO,MAAMmB,QAAQ,GAAInB,EAAD,IAAQE,QAAQ,IAAI;AAExC,QAAMC,QAAQ,GAAI,GAAET,UAAU,CAACU,GAAI,GAAEV,UAAU,CAACW,SAAX,CAAqBC,KAArB,CAA2Bc,KAAM,IAAGpB,EAAG,EAA5E;AAEAP,EAAAA,OAAO,CAAC4B,GAAR,CAAYlB,QAAZ,EAAsB,CAACM,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,KAA2B;AAE7C,UAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAZ;;AAEA,QAAIF,KAAJ,EAAW;AACPP,MAAAA,QAAQ,CAAC;AACLa,QAAAA,IAAI,EAAEpB,UADD;AAELqB,QAAAA,OAAO,EAAEJ;AAFJ,OAAD,CAAR;AAIEK,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBN,GAA/B;AACL,KAND,MAOK;AACD;AACAV,MAAAA,QAAQ,CAACoB,cAAc,CAACV,GAAD,CAAf,CAAR;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBP,IAAI,CAACY,IAAL,CAAUX,GAAV,CAA/B;AACH;AACJ,GAhBD;AAiBH,CArBM;AAuBP,OAAO,MAAMU,cAAc,GAAGE,IAAI,IAAI;AAClC,SAAO;AACHT,IAAAA,IAAI,EAAElB,gBADH;AAEHmB,IAAAA,OAAO,EAAEQ;AAFN,GAAP;AAIH,CALM","sourcesContent":["import request from 'request';\nimport serverConf from '../config'\nimport { GET_ERRORS, UPDATE_USER, SET_CURRENT_USER } from './types';\nimport { loginUser } from './authActions'\n\n\nexport const updateAdmin = (id, form) => dispatch => {\n\n    const endpoint = `${serverConf.uri}${serverConf.endpoints.admin.update}/${id}`;\n\n    request.put(endpoint, { form }, (error, response, body) => {\n        \n        const res = JSON.parse(body);\n\n\n        if (error) {\n            dispatch({\n                type: GET_ERRORS,\n                payload: res\n              })\n        }\n        else {\n            console.log(\"Hello there: \" + res.id)\n            dispatch(getAdmin(res.id))\n            \n            \n        }   \n    });\n };\n\n // get volunteers from database\nexport const getAdmin = (id) => dispatch => {\n\n    const endpoint = `${serverConf.uri}${serverConf.endpoints.admin.fetch}/${id}`;\n\n    request.get(endpoint, (error, response, body) => {\n        \n        const res = JSON.parse(body);\n\n        if (error) {\n            dispatch({\n                type: GET_ERRORS,\n                payload: res\n              })\n              console.log(\"HEREHEREHERE1 \" + res);\n        }\n        else {\n            // set current volunteers\n            dispatch(setCurrentUser(res))\n            console.log(\"HEREHEREHERE2 \" + body.json(res));\n        }    \n    });\n};\n\nexport const setCurrentUser = user => {\n    return {\n        type: SET_CURRENT_USER,\n        payload: user\n    };\n};\n"]},"metadata":{},"sourceType":"module"}